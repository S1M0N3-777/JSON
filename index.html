<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="static/css/index.css">
</head>
<body>
    <div class="container">
        <input type="button" name="start" id="starting" value="Avvia">
        <form action="#"> 
            <span class="question-number"></span>
            <span class="question-text"></span>
            <div class="input-group">
            <input type="text" name="answer" id="user-guess">
            <input type="submit" name="" id="button">
            </div>
        </form>
        <h1 class="endgame"></h1>
    </div>
    <script>
        let score = 0
        let bool = false
        let rispostautente
        let currentQuestion = 0;
        let ndomanda = document.querySelector(".question-number")
        let domanda = document.querySelector(".question-text")
        let input = document.querySelector("[name=answer]")
        let button = document.querySelector("#button")
        let start = document.querySelector("#starting")
        let endgame = document.querySelector(".endgame")
        let quiz = [
            {
                "ndomanda": "1.",
                "testo": "in che anno è scoppiata la prima guerra mondiale?",
                "rispostagiusta": "1915",
                "rispostautente": "",
            },
            {
                "ndomanda": "2.",
                "testo": "chi ha vinto i mondiali nel 2022?",
                "rispostagiusta": "Argentina",
                "rispostautente": "",
            },
            {
                "ndomanda": "3.",
                "testo": "se Mario ha 3 mele e Frank ne ruba 2, cos'è Frank?",
                "rispostagiusta": "Un ladro",
                "rispostautente": "",
            },
            {
                "ndomanda": "4.",
                "testo": "da che età si può conseguire la patente A?",
                "rispostagiusta": "14",
                "rispostautente": "",
            },
            {
                "ndomanda": "5.",
                "testo": "oggi piu di ieri (continua la frase)",
                "rispostagiusta": "Odio i carabinieri",
                "rispostautente": "",
            },
        ] 
        
        let form = document.querySelector("form")
        
        function sanitize(input){
            return input.trim().toLowerCase()
        }

        function fine(){
            endgame.innerHTML = "Gioco Terminato hai totalizzato " + score + " punti!"
        }

        function avvia(){
            start.style.visibility = "hidden"
            ndomanda.style.visibility = "visible"
            domanda.style.visibility = "visible"
            input.style.visibility = "visible"
            button.style.visibility = "visible"
            let obj = quiz[currentQuestion]
            ndomanda.innerHTML = obj["ndomanda"]
            domanda.innerHTML = obj["testo"]
            // ------------------------------------
            form.addEventListener("submit" , function(e){
                e.preventDefault()
                input = document.querySelector("[name=answer]").value
                input = sanitize(input)
                obj["rispostautente"] = input
                if(obj["rispostautente"] === obj["rispostagiusta"]){
                    console.log("Ok")
                    score += 1
                    
                }
                currentQuestion = currentQuestion + 1
                if(currentQuestion < quiz.length){
                    
                    obj = quiz[currentQuestion]
                    ndomanda.innerHTML = obj["ndomanda"]
                    domanda.innerHTML = obj["testo"]
                }else{
                    fine()
                }
            })
        }





        window.addEventListener("load", function(){
        ndomanda.style.visibility = "hidden"
        domanda.style.visibility = "hidden"
        input.style.visibility = "hidden"
        button.style.visibility = "hidden"
        start.addEventListener("click", avvia)
        })



    </script>
</body>
</html>